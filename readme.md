<h1> My Music API</h1>

- [How to get started](#how-to-get-started)
- [API](#api)
  - [Classes](#classes)
  - [Methods](#methods)

This is a homemade Music API that will play notes you pass into it. For an example, look at `fib.py`. The code in that file generates the file `audio/fib.wav`, which plays notes from the harmonic minor scale with scale degrees corresponding to the first digit of the first **1000** fibonacci numbers, with each note lasting **0.3** seconds.

You can find various audio samples in the `audio` directory. Here's my naming convention: if the audio file is called `xyz.wav`, it was generated by the file `xyz.py`, although I'm not super strict with it, so I mayb deviate from it sometimes.

# How to get started
Want to try run this yourself? Here's how:
1. Clone the repository
2. From your terminal in the same directory as `requirements.txt`, run `python -m pip install -r requirements.txt`. Depending on your computer, you might have to run `python -m pip install --user -r requirements.txt `. Alternatively, the packages you need to install are `numpy`, `scipy`, and `simpleaudio`. `numpy` is necessary regardless, `scipy` is necessary for savcing audio to a file, and `simpleaudio` is used to play audio in the script without saving it anywhere.
3. Create new python file, and create a new `Player`:
    ```python
    #main.py#
    from Player import Player
    player = Player()
    ```
4. Give the Player some notes to work with in form of a list:
    ```python
    #main.py
    from Player import Player
    player = Player()
    player.set_notes(list_of_notes)
    ``` 
    The values in the list should be positive integers corresponding to scale degrees. The default scale used it the A harmonic minor scale, but this can be changed with `Player().set_scale(scalename)`. With the default settings, numbers from **0** to **800** are okay, but in practice any number greater than say **60** is just going to sound stupid. With the default settings, the number **48** corresponds to **7040 Hz** (the highest note on a piano is **4186 Hz**)
5. Give the Player some note durations (in seconds) to work with:
   ```python
       #main.py
    from Player import Player
    
    player = Player()
    # for example [0, 2, 4]#
    # is an A minor cord with
    # default settings
    player.set_notes(notes)
    # for example [0.3, 0.3, 0.3]
    # will play each note for 0.3
    # seconds.
    # another example: [1, 0.3, 0.3]
    # will play the first note for one second,
    # and then quickly play the other two for
    # only 0.3 seconds each
    player.set_note_durations(durations)
   ```
   You can make chords by passing it a list of values as the 'note', so to arpeggiate an A minor chord and then 'strum' it, we could write
   ```python
   #main.py
   from Player import Player

   notes = [
       0, 4, 2,
       [0, 2, 4],
   ]

    durations = [
        0.3 for note in notes
    ]

   player = Player()
   player.set_notes(notes)
   player.set_note_durations(durations)

   ````

6. Now we need to generate some audio, so we call `Player().generate_audio`:
   ```python
   #main.py
   from Player import Player
   player = Player()
   player.set_notes(notes)
   player.set_note_durations(durations)
   player.generate_audio()
   ```
7. Now, we can either play the audio immiedately with `Player().play()`, or save it to a `.wav` file with `Player().save_audio(filename)`. This will save the audio to the filename you specify, inside the `audio` folder. If you want to save it outside that folder, you can fo so like this: `Player().save_audio(filename, no_audio_folder=True)`.
8. Now the audio is ready!

# API
You can see a much more detailed version of this API documentation at https://christofferaakre.github.io/music.

Classes
-------

`Player(sample_rate=44100)`
:   Initializes a Player instance, e.g. player = Player()

## Methods

`add_scale(self, name, scale, number_of_octaves=100)`
    :   Adds a given scale to the Player
        with the given name,
        e.g. Player().add_scale("melodic minor", [*scaletones]).

`generate_audio(self, scale=None)`
    :   Uses the given scale, defaulting to self.active_scale,
        to generate audio from self.notes and self.note_durations,
        then stores it in self.audio.

`play(self)`
    :   Plays the audio stored in self.audio.

`save_audio(self, filename, no_audio_folder=False)`
    :   Saves the audio stored in self.audio
        to the specified .wav file.

`set_active_scale(self, name)`
    :   Sets the active scale to the
        provided scale name, provided
        the scale exists in self.scales

`set_base(self, base)`
    :   Sets the base frequency to
        use for new scales.

`set_get_note(self, function)`
    :   Sets the get_note_from_integer function. By default,
        this function just uses the first digit in a number,
        but you can change that by passing set_get_note a function.

`set_note_durations(self, durations)`
    :   Uses the given list to set the
        durations of the notes.

`set_notes(self, notes)`
    :   Sets the player's notes
        using the given list.

`update_duration(self)`
    :   When we change the notes or
        the note durations, the total
        duration also changes, so we
        must update it. This happens automatically,
        as update_duration is called in both
        set_notes and set_note_durations.